parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sPKV":[function(require,module,exports) {
module.exports="/broider/1.215f8ecf.png";
},{}],"ShgR":[function(require,module,exports) {
module.exports="/broider/2.07e2c5fb.png";
},{}],"A8Ym":[function(require,module,exports) {
module.exports="/broider/4.ed708439.png";
},{}],"tI7p":[function(require,module,exports) {
module.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,t=[],a=0;a<e.rangeCount;a++)t.push(e.getRangeAt(a));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach(function(n){e.addRange(n)}),n&&n.focus()}};
},{}],"gpwS":[function(require,module,exports) {
"use strict";var e=require("toggle-selection"),t={"text/plain":"Text","text/html":"Url",default:"Text"},o="Copy to clipboard: #{key}, Enter";function a(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function n(n,r){var c,l,s,i,p,d,u=!1;r||(r={}),c=r.debug||!1;try{if(s=e(),i=document.createRange(),p=document.getSelection(),(d=document.createElement("span")).textContent=n,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(e){if(e.stopPropagation(),r.format)if(e.preventDefault(),void 0===e.clipboardData){c&&console.warn("unable to use e.clipboardData"),c&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=t[r.format]||t.default;window.clipboardData.setData(o,n)}else e.clipboardData.clearData(),e.clipboardData.setData(r.format,n);r.onCopy&&(e.preventDefault(),r.onCopy(e.clipboardData))}),document.body.appendChild(d),i.selectNodeContents(d),p.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(m){c&&console.error("unable to copy using execCommand: ",m),c&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",n),r.onCopy&&r.onCopy(window.clipboardData),u=!0}catch(m){c&&console.error("unable to copy using clipboardData: ",m),c&&console.error("falling back to prompt"),l=a("message"in r?r.message:o),window.prompt(l,n)}}finally{p&&("function"==typeof p.removeRange?p.removeRange(i):p.removeAllRanges()),d&&document.body.removeChild(d),s()}return u}module.exports=n;
},{"toggle-selection":"tI7p"}],"PUau":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=7;exports.tileSize=e;var t=16;exports.editorRatio=t;
},{}],"UldJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./state");function e(){return new Array(r.tileSize).fill(0).map(function(e,t){return new Array(r.tileSize).fill(0)})}function t(){return new Array(3).fill(0).map(function(r,t){return new Array(3).fill(0).map(function(r,t){return e()})})}function n(r,e){var t=r,n=e;return 1==arguments.length&&(t=0,n=r),t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t))+t}function i(){return[n(3),n(3),n(r.tileSize),n(r.tileSize)]}function o(e){var t=e[0],n=e[1];return[3*r.tileSize-n,t]}function u(e,t){var n=e[0],i=e[1];void 0===t&&(t=1);var o=3*r.tileSize-1;return[[n,i],[o-i,n],[o-n,o-i],[i,o-n]]}function a(r,e){var t=e.reduce(function(r,e){return r[e]},r);return"number"!=typeof t?0:t}function c(r,e,t){void 0===t&&(t=1);var n=e.slice(0,-1),i=e[e.length-1];n.reduce(function(r,e){return r[e]},r)[i]=t}exports.newGrid=t,exports.randomInt=n,exports.randomLoc=i,exports.rotatePair=o,exports.rotationSet=u,exports.getLoc=a,exports.setLoc=c;
},{"./state":"PUau"}],"ovzr":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("copy-to-clipboard")),o=require("./state"),i=require("./utils"),r=document.getElementById("target"),n=document.getElementById("editor"),l=document.getElementById("guide"),d=document.getElementById("render"),a=n.getContext("2d"),s=l.getContext("2d"),c=d.getContext("2d");function u(){a.clearRect(0,0,n.width,n.height)}function f(e,t){c.fill();for(var r=0;r<3;r++)for(var n=0;n<3;n++)for(var l=0;l<o.tileSize;l++)for(var d=0;d<o.tileSize;d++){var s=i.getLoc(e,[r,n,l,d]);a.fillStyle=1==s?window.paintColor:"#fff0",c.fillStyle=1==s?window.paintColor:"#fff0";var u=(r*o.tileSize+l)*t,f=(n*o.tileSize+d)*t;1==r&&1==n||(c.clearRect(u,f,t,t),c.fillRect(u,f,t,t),u*=o.editorRatio/t,f*=o.editorRatio/t,a.fillRect(u+1,f+1,o.editorRatio-1,o.editorRatio-1))}}function h(){for(var e=1;e<3;e++){s.strokeStyle="#33f",s.lineWidth=.5;var t=e*n.width/3;s.beginPath(),s.moveTo(t,0),s.lineTo(t,n.height),s.stroke(),s.beginPath(),s.moveTo(0,t),s.lineTo(n.height,t),s.stroke()}for(e=0;e<3*o.tileSize;e++){s.strokeStyle="#ccc";t=e*n.width/(3*o.tileSize);s.beginPath(),s.moveTo(t,0),s.lineTo(t,n.height),s.stroke(),s.beginPath(),s.moveTo(0,t),s.lineTo(n.height,t),s.stroke()}var i=n.width/3;s.clearRect(i+1,i+1,i-2,i-2),s.beginPath(),s.moveTo(1*i,2*i),s.lineTo(2*i,1*i),s.stroke(),s.beginPath(),s.moveTo(1*i,1*i),s.lineTo(2*i,2*i),s.stroke()}function m(e){var t=d.toDataURL(),i=document.getElementById("border-style");i&&i.remove(),(i=document.createElement("style")).id="border-style",document.head.appendChild(i);var n=o.tileSize*e,l='.broider {\n    border-image:  url("'+t+'") '+n+" /  "+n+"px / 0 round;\n    border-width:  "+n+"px;\n    border-style:  solid;\n}";i.sheet.insertRule(l),r.textContent=l}function g(e,t){var r=t[0]*o.tileSize+t[2],n=t[1]*o.tileSize+t[3];a.fillStyle=(i.getLoc(e,t),"#dde"),1==t[0]&&1==t[1]||a.fillRect(r*o.editorRatio+0,n*o.editorRatio+0,o.editorRatio-0,o.editorRatio-0)}function v(){r.setAttribute("data-after","[Click to copy]")}function p(){t.default(r.textContent,{message:"Press #{key} to copy css"}),r.setAttribute("data-after","Copied to your clipboard!"),r.classList.remove("flash"),window.setTimeout(function(){r.classList.add("flash")},1),window.setTimeout(v,2500)}c.imageSmoothingEnabled=!1,exports.cleanMap=u,exports.renderMap=f,exports.drawGuide=h,exports.setBorder=m,exports.renderHover=g,r.addEventListener("click",p),v();
},{"copy-to-clipboard":"gpwS","./state":"PUau","./utils":"UldJ"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./assets/1.png")),n=e(require("./assets/2.png")),i=e(require("./assets/4.png")),d=require("./src/render"),r=require("./src/state"),o=require("./src/utils"),a=document.getElementById("pen"),c=document.getElementById("eraser"),s=document.getElementById("symmetry"),l=document.getElementById("undo"),u=document.getElementById("scale"),f=document.getElementById("color"),v=document.getElementById("editor-frame"),h=document.getElementById("editor"),g=document.getElementById("guide"),m=document.getElementById("render");h.width=r.tileSize*r.editorRatio*3,h.height=r.tileSize*r.editorRatio*3,g.width=r.tileSize*r.editorRatio*3,g.height=r.tileSize*r.editorRatio*3;var p=2,E=[1,2,4],L=[t.default,n.default,i.default],w=E[p];function S(){v.style.height=h.getBoundingClientRect().width+"px"}m.width=r.tileSize*w*3,m.height=r.tileSize*w*3,u.addEventListener("click",function(){p=(p+1)%E.length,u.src=L[p],w=E[p],m.width=r.tileSize*w*3,m.height=r.tileSize*w*3,d.renderMap(z,w),d.setBorder(w),S()}),window.paintColor="#000",f.addEventListener("input",function(e){window.paintColor=e.target.value,d.renderMap(z,w),d.setBorder(w)}),document.addEventListener("DOMContentLoaded",S),window.addEventListener("resize",S);var B=!1,y=!1,M=!0;s.addEventListener("click",function(e){M=!M,s.classList.toggle("selected")}),c.addEventListener("click",function(e){y=!0,c.classList.add("selected"),a.classList.remove("selected")}),a.addEventListener("click",function(e){y=!1,a.classList.add("selected"),c.classList.remove("selected")});var z=o.newGrid(),I=[JSON.stringify(z)];function R(){var e=JSON.stringify(z);e!=I[I.length-1]&&(I.push(e),I.length>50&&I.shift(),l.classList.add("selected"))}function k(){I.pop();var e=I[I.length-1];e&&(z=JSON.parse(e),d.cleanMap(),d.renderMap(z,w),d.setBorder(w))}function q(e,t){B&&o.setLoc(z,e,1-t)}l.addEventListener("click",function(e){k(),I.length<2&&l.classList.remove("selected"),e.preventDefault()}),d.drawGuide(),d.renderMap(z,w),d.setBorder(w);var D=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=h.getBoundingClientRect(),a=i.left,c=i.top,s=i.width,l=i.height,u=e.clientX-a,f=e.clientY-c,v=u/s*h.width,g=f/l*h.height,m=Math.floor(v/r.editorRatio),p=Math.floor(g/r.editorRatio),E=M?o.rotationSet([m,p]):[[m,p]];d.cleanMap(),E.forEach(function(e){var i=e[0],a=e[1],c=Math.floor(i/r.tileSize),s=Math.floor(a/r.tileSize),l=[c,s,i%r.tileSize,a%r.tileSize];if(!(c<0||c>2||s<0||s>2)){n&&d.renderHover(z,l);var u=o.getLoc(z,l);t||(u=0),y&&(u=1),q(l,u)}}),d.renderMap(z,w),window.setTimeout(function(){return d.setBorder(w)},0)};h.addEventListener("mousedown",function(e){B=!0,D(e,!0)}),h.addEventListener("mousemove",function(e){D(e,!1,!0)}),h.addEventListener("mouseout",function(e){d.cleanMap(),d.renderMap(z,w)}),window.addEventListener("mousedown",function(){B=!0}),window.addEventListener("mouseup",function(){B=!1,R()}),h.addEventListener("touchend",function(e){B=!1,R()}),h.addEventListener("touchstart",function(e){B=!0,e.preventDefault();for(var t=e.targetTouches,n=0;n<t.length;n++)e.clientX=t[n].clientX,e.clientY=t[n].clientY,D(e)}),h.addEventListener("touchmove",function(e){e.preventDefault(),B=!0;for(var t=e.targetTouches,n=0;n<t.length;n++)e.clientX=t[n].clientX,e.clientY=t[n].clientY,D(e)});var _=0;window.addEventListener("touchend",function(e){e.timeStamp-_<=500&&(e.preventDefault(),e.target.click()),B=!1,_=e.timeStamp});
},{"./assets/1.png":"sPKV","./assets/2.png":"ShgR","./assets/4.png":"A8Ym","./src/render":"ovzr","./src/state":"PUau","./src/utils":"UldJ"}]},{},["QCba"], null)
//# sourceMappingURL=/broider/border.8e975f76.js.map